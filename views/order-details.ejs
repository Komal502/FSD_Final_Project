<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Order Details | MyStore</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background: #f0f2f5; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    h2 { font-weight: 700; color: #1e3a8a; }
    .card { border-radius: 16px; margin-bottom: 20px; }
    .product-item { display: flex; align-items: center; margin-bottom: 12px; }
    .product-item img { width: 80px; height: 80px; object-fit: cover; border-radius: 8px; margin-right: 15px; }
    .badge-status { font-size: 0.85rem; padding: 6px 12px; border-radius: 12px; }
    .total-section { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; font-weight: 600; }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h2 class="mb-4">Order Details</h2>

    <div class="card p-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <span>Order ID: <strong><%= order._id %></strong></span>
        <span class="badge 
          <%= order.status === 'Pending' ? 'bg-warning' : order.status === 'Completed' ? 'bg-success' : 'bg-secondary' %> badge-status">
          <%= order.status %>
        </span>
      </div>

      <div class="mb-3">
        <h5>Products</h5>
        <% order.products.forEach(p => { %>
          <% if(p.productId) { %>
            <div class="product-item">
              <img src="<%= p.productId.image || '/images/default-product.png' %>" alt="<%= p.productId.name %>">
              <div>
                <div><strong><%= p.productId.name %></strong></div>
                <div>Qty: <%= p.quantity %></div>
                <div>Price: $<%= p.productId.price.toFixed(2) %></div>
              </div>
            </div>
          <% } %>
        <% }) %>
      </div>

      <div class="total-section">
        <span>Total Price:</span>
        <span class="text-success">$<%= order.totalPrice.toFixed(2) %></span>
      </div>

      <div class="mt-3">
        <a href="/orders" class="btn btn-outline-primary">‚Üê Back to Orders</a>
      </div>
    </div>
  </div>
</body>
</html>
